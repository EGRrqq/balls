var b=(i,t,s)=>{if(!t.has(i))throw TypeError("Cannot "+s)};var o=(i,t,s)=>(b(i,t,"read from private field"),s?s.call(i):t.get(i)),g=(i,t,s)=>{if(t.has(i))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(i):t.set(i,s)},l=(i,t,s,r)=>(b(i,t,"write to private field"),r?r.call(i,s):t.set(i,s),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function s(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(e){if(e.ep)return;e.ep=!0;const n=s(e);fetch(e.href,n)}})();var f,a,c,h,u;class C{constructor(t){g(this,h);g(this,f,void 0);g(this,a,!1);g(this,c,void 0);l(this,f,t);const s=25;l(this,c,{x:Math.random()*(t.canvas.width-2*s)+s,y:Math.random()*(t.canvas.height-2*s)+s,vx:0,vy:0,radius:s})}onTouch(t,s){t<=this.settings.radius&&!o(this,a)&&(l(this,a,!0),s()),t>this.settings.radius&&o(this,a)&&l(this,a,!1)}draw(t=o(this,c)){o(this,h,u).beginPath(),o(this,h,u).arc(t.x,t.y,t.radius,0,2*Math.PI),o(this,h,u).fill(),o(this,h,u).closePath()}applyImpulse(t,s){this.settings.vx+=s.x*t,this.settings.vy+=s.y*t}updatePos(){this.settings.x+=this.settings.vx,this.settings.y+=this.settings.vy}getPos(){return{x:this.settings.x,y:this.settings.y}}edgeCollision(t){(this.settings.y+this.settings.vy>t.height-this.settings.radius||this.settings.y+this.settings.vy<this.settings.radius)&&(this.settings.vy=-this.settings.vy),(this.settings.x+this.settings.vx>t.width-this.settings.radius||this.settings.x+this.settings.vx<this.settings.radius)&&(this.settings.vx=-this.settings.vx)}ballsCollision(t){for(const s of t)if(s.ball!==this){const r=s.vector.dirVec(this.getPos(),s.ball.getPos());s.vector.distance(r)<this.settings.radius+s.ball.settings.radius&&([this.settings.vx,s.ball.settings.vx]=[s.ball.settings.vx,this.settings.vx],[this.settings.vy,s.ball.settings.vy]=[s.ball.settings.vy,this.settings.vy])}}dampVelocity(t){this.settings.vx*=t,this.settings.vy*=t}get settings(){return o(this,c)}set settings(t){l(this,c,Object.assign(t))}}f=new WeakMap,a=new WeakMap,c=new WeakMap,h=new WeakSet,u=function(){return o(this,f)};class w{getPos(t,s){const r=t.clientX-s.getBoundingClientRect().left,e=t.clientY-s.getBoundingClientRect().top;return{x:r,y:e}}}class P{distance(t){return Math.sqrt(t.x*t.x+t.y*t.y)}dirVec(t,s){const r=t.x-s.x,e=t.y-s.y;return{x:r,y:e}}normalizeDirVec(t,s){const r=t.x/s,e=t.y/s;return{x:r,y:e}}}var y;class B{constructor(t){g(this,y,void 0);l(this,y,t)}clearBoard(){var t;(t=this.ctx)==null||t.clearRect(0,0,this.board.width,this.board.height)}get board(){return o(this,y)}get ctx(){return this.board.getContext("2d")}}y=new WeakMap;const O=i=>Object.create({mouse:new w,ball:new C(i),vector:new P}),E=document.getElementById("board"),p=new B(E),x=p.ctx;function L(i){if(!x)return;const t=[];for(;i>0;)t.push(O(x)),i--;return{boardController:p,shapeControllers:t}}const v=L(10);if(v){let i=function(s,r){r.shapeControllers.forEach(e=>{const n=e.vector.dirVec(e.mouse.getPos(s,r.boardController.board),e.ball.getPos()),d=e.vector.distance(n),m=e.vector.normalizeDirVec(n,d);e.ball.onTouch(d,()=>{e.ball.applyImpulse(-8,m)})})},t=function(s){s.boardController.clearBoard(),s.shapeControllers.forEach(r=>{r.ball.draw(),r.ball.updatePos(),r.ball.dampVelocity(.99),r.ball.edgeCollision(s.boardController.board),r.ball.ballsCollision(s.shapeControllers)}),requestAnimationFrame(()=>t(s))};window.addEventListener("load",()=>t(v),{once:!0}),v.boardController.board.addEventListener("mousemove",s=>i(s,v))}
