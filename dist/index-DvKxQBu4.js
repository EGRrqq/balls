var b=(i,t,s)=>{if(!t.has(i))throw TypeError("Cannot "+s)};var n=(i,t,s)=>(b(i,t,"read from private field"),s?s.call(i):t.get(i)),h=(i,t,s)=>{if(t.has(i))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(i):t.set(i,s)},d=(i,t,s,o)=>(b(i,t,"write to private field"),o?o.call(i,s):t.set(i,s),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function s(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(e){if(e.ep)return;e.ep=!0;const r=s(e);fetch(e.href,r)}})();var f,l,g,a,u;class C{constructor(t){h(this,a);h(this,f,void 0);h(this,l,!1);h(this,g,{x:Math.floor(Math.random()*700),y:Math.floor(Math.random()*500),vx:0,vy:0,radius:25});d(this,f,t)}onTouch(t,s){t<=this.settings.radius&&!n(this,l)&&(d(this,l,!0),s()),t>this.settings.radius&&n(this,l)&&d(this,l,!1)}draw(t=n(this,g)){n(this,a,u).beginPath(),n(this,a,u).arc(t.x,t.y,t.radius,0,2*Math.PI),n(this,a,u).fill(),n(this,a,u).closePath()}applyImpulse(t,s){this.settings.vx+=s.x*t,this.settings.vy+=s.y*t}updatePos(){this.settings.x+=this.settings.vx,this.settings.y+=this.settings.vy}getPos(){return{x:this.settings.x,y:this.settings.y}}edgeCollision(t){(this.settings.y+this.settings.vy>t.height-this.settings.radius||this.settings.y+this.settings.vy<this.settings.radius)&&(this.settings.vy=-this.settings.vy),(this.settings.x+this.settings.vx>t.width-this.settings.radius||this.settings.x+this.settings.vx<this.settings.radius)&&(this.settings.vx=-this.settings.vx)}ballsCollision(t){for(const s of t)if(s.ball!==this){const o=s.vector.dirVec(this.getPos(),s.ball.getPos());s.vector.distance(o)<this.settings.radius+s.ball.settings.radius&&([this.settings.vx,s.ball.settings.vx]=[s.ball.settings.vx,this.settings.vx],[this.settings.vy,s.ball.settings.vy]=[s.ball.settings.vy,this.settings.vy])}}dampVelocity(t){this.settings.vx*=t,this.settings.vy*=t}get settings(){return n(this,g)}set settings(t){d(this,g,Object.assign(t))}}f=new WeakMap,l=new WeakMap,g=new WeakMap,a=new WeakSet,u=function(){return n(this,f)};class w{getPos(t,s){const o=t.clientX-s.getBoundingClientRect().left,e=t.clientY-s.getBoundingClientRect().top;return{x:o,y:e}}}class P{distance(t){return Math.sqrt(t.x*t.x+t.y*t.y)}dirVec(t,s){const o=t.x-s.x,e=t.y-s.y;return{x:o,y:e}}normalizeDirVec(t,s){const o=t.x/s,e=t.y/s;return{x:o,y:e}}}var y;class M{constructor(t){h(this,y,void 0);d(this,y,t)}clearBoard(){var t;(t=this.ctx)==null||t.clearRect(0,0,this.board.width,this.board.height)}get board(){return n(this,y)}get ctx(){return this.board.getContext("2d")}}y=new WeakMap;const B=i=>Object.create({mouse:new w,ball:new C(i),vector:new P}),O=document.getElementById("board"),p=new M(O),x=p.ctx;function E(i){if(!x)return;const t=[];for(;i>0;)t.push(B(x)),i--;return{boardController:p,shapeControllers:t}}const v=E(10);if(v){let i=function(s,o){o.shapeControllers.forEach(e=>{const r=e.vector.dirVec(e.mouse.getPos(s,o.boardController.board),e.ball.getPos()),c=e.vector.distance(r),m=e.vector.normalizeDirVec(r,c);e.ball.onTouch(c,()=>{e.ball.applyImpulse(-8,m)})})},t=function(s){s.boardController.clearBoard(),s.shapeControllers.forEach(o=>{o.ball.draw(),o.ball.updatePos(),o.ball.dampVelocity(.99),o.ball.edgeCollision(s.boardController.board),o.ball.ballsCollision(s.shapeControllers)}),requestAnimationFrame(()=>t(s))};window.addEventListener("load",()=>t(v),{once:!0}),v.boardController.board.addEventListener("mousemove",s=>i(s,v))}
